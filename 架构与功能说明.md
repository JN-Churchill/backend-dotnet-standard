# Backend Standard - .NET 8 ä¼ä¸šçº§åç«¯æ ‡å‡†æ¨¡æ¿

> **æœ€åæ›´æ–°**: 2025å¹´12æœˆ25æ—¥  
> **é€‚ç”¨åœºæ™¯**: ä¼ä¸šçº§Web APIå¼€å‘ã€å¾®æœåŠ¡åç«¯ã€SaaSå¹³å°  
> **æŠ€æœ¯æ ˆ**: .NET 8 + SqlSugar + JWT + Redis + Quartz

---

## ğŸ“– ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
3. [æŠ€æœ¯æ ˆè¯¦è§£](#æŠ€æœ¯æ ˆè¯¦è§£)
4. [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
5. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
6. [APIæ¥å£è§„èŒƒ](#apiæ¥å£è§„èŒƒ)
7. [å®‰å…¨ä¸æƒé™](#å®‰å…¨ä¸æƒé™)
8. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
9. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **.NET 8** æ„å»ºçš„**ä¼ä¸šçº§åç«¯æ ‡å‡†æ¨¡æ¿é¡¹ç›®**ï¼Œéµå¾ª **DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰** åˆ†å±‚æ¶æ„ï¼Œé›†æˆäº†ä¼ä¸šçº§é¡¹ç›®å¸¸ç”¨çš„åŸºç¡€è®¾æ–½å’ŒåŠŸèƒ½æ¨¡å—ï¼Œå¼€ç®±å³ç”¨ã€‚

### æ ¸å¿ƒç‰¹æ€§

âœ… **çº¯æ ‡å‡†.NETå®ç°** - æ— ç¬¬ä¸‰æ–¹æ¡†æ¶ä¾èµ–ï¼Œä½¿ç”¨ASP.NET CoreåŸç”ŸAPI  
âœ… **å®Œæ•´çš„åˆ†å±‚æ¶æ„** - ä¸¥æ ¼çš„DDDå››å±‚æ¶æ„ï¼ŒèŒè´£æ¸…æ™°  
âœ… **å¤šç§Ÿæˆ·æ”¯æŒ** - å†…ç½®ç§Ÿæˆ·éš”ç¦»æœºåˆ¶  
âœ… **RBACæƒé™ç³»ç»Ÿ** - è§’è‰²-æƒé™-ç”¨æˆ·ä¸‰çº§æƒé™ç®¡ç†  
âœ… **æ•°æ®æƒé™æ§åˆ¶** - æ”¯æŒå…¨éƒ¨/æœ¬äºº/æœ¬éƒ¨é—¨/æœ¬éƒ¨é—¨åŠä¸‹çº§ç­‰æ•°æ®æƒé™  
âœ… **å®¡è®¡æ—¥å¿—** - è‡ªåŠ¨è®°å½•åˆ›å»ºäººã€æ›´æ–°äººã€åˆ é™¤æ—¶é—´ç­‰å®¡è®¡ä¿¡æ¯  
âœ… **è½¯åˆ é™¤æ”¯æŒ** - æ•°æ®é€»è¾‘åˆ é™¤ï¼Œå¯æ¢å¤  
âœ… **åˆ†å¸ƒå¼ID** - é›ªèŠ±ç®—æ³•ç”Ÿæˆå…¨å±€å”¯ä¸€ID  
âœ… **ç¼“å­˜æ”¯æŒ** - å†…å­˜ç¼“å­˜/RedisåŒå®ç°  
âœ… **å®šæ—¶ä»»åŠ¡** - åŸºäºQuartz.NETçš„ä»»åŠ¡è°ƒåº¦  
âœ… **ç»Ÿä¸€å¼‚å¸¸å¤„ç†** - å…¨å±€å¼‚å¸¸æ‹¦æˆªå’Œå‹å¥½è¿”å›  
âœ… **è¯·æ±‚æ—¥å¿—** - è‡ªåŠ¨è®°å½•APIè¯·æ±‚è¯¦æƒ…  
âœ… **æ¥å£é™æµ** - é˜²æ­¢APIè¢«æ¶æ„åˆ·æ¥å£  
âœ… **æ•°æ®éªŒè¯** - FluentValidationæµå¼éªŒè¯  
âœ… **Swaggeræ–‡æ¡£** - è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£  

---

## æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ **DDDå››å±‚æ¶æ„**ï¼Œå„å±‚èŒè´£æ˜ç¡®ã€ä¾èµ–å•å‘ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  backendStd.Web.Entry  [è¡¨ç°å±‚/å¯åŠ¨å±‚]          â”‚
â”‚  - åº”ç”¨ç¨‹åºå…¥å£                                  â”‚
â”‚  - ä¸­é—´ä»¶ç®¡é“é…ç½®                                â”‚
â”‚  - ä¾èµ–æ³¨å…¥é…ç½®                                  â”‚
â”‚  - è®¤è¯æˆæƒé…ç½®                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  backendStd.Application  [åº”ç”¨å±‚]                â”‚
â”‚  - Controllers (APIæ¥å£)                         â”‚
â”‚  - DTOs (æ•°æ®ä¼ è¾“å¯¹è±¡)                           â”‚
â”‚  - Services (ä¸šåŠ¡æœåŠ¡)                           â”‚
â”‚  - Validators (æ•°æ®éªŒè¯å™¨)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  backendStd.Core  [é¢†åŸŸå±‚/æ ¸å¿ƒå±‚]                â”‚
â”‚  - Entity (å®ä½“æ¨¡å‹)                             â”‚
â”‚  - Repository (ä»“å‚¨æ¥å£/å®ç°)                    â”‚
â”‚  - Auth (è®¤è¯æˆæƒ)                               â”‚
â”‚  - Cache (ç¼“å­˜æœåŠ¡)                              â”‚
â”‚  - Jobs (å®šæ—¶ä»»åŠ¡)                               â”‚
â”‚  - Filters (è¿‡æ»¤å™¨)                              â”‚
â”‚  - Middleware (ä¸­é—´ä»¶)                           â”‚
â”‚  - Options (é…ç½®é€‰é¡¹)                            â”‚
â”‚  - Enum/Const (æšä¸¾/å¸¸é‡)                        â”‚
â”‚  - Util (å·¥å…·ç±»)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  backendStd.Common  [åŸºç¡€è®¾æ–½å±‚]                 â”‚
â”‚  - Exceptions (è‡ªå®šä¹‰å¼‚å¸¸)                       â”‚
â”‚  - Models (é€šç”¨æ¨¡å‹)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–å…³ç³»è¯´æ˜

- **å•å‘ä¾èµ–**: ä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸ä¾èµ–ä¸Šå±‚
- **æ¥å£éš”ç¦»**: é€šè¿‡æ¥å£è§£è€¦å…·ä½“å®ç°
- **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨ASP.NET Coreå†…ç½®DIå®¹å™¨

---

## æŠ€æœ¯æ ˆè¯¦è§£

### æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| **.NET** | 8.0 | åŸºç¡€æ¡†æ¶ | æœ€æ–°LTSç‰ˆæœ¬ï¼Œæ€§èƒ½ä¼˜è¶Š |
| **ASP.NET Core** | 8.0 | Webæ¡†æ¶ | RESTful APIå¼€å‘ |
| **SqlSugar** | 5.1.4.162 | ORM | é«˜æ€§èƒ½ã€å¤šæ•°æ®åº“æ”¯æŒ |
| **Serilog** | - | æ—¥å¿—æ¡†æ¶ | ç»“æ„åŒ–æ—¥å¿—ï¼Œæ”¯æŒå¤šsink |
| **FluentValidation** | 11.x | æ•°æ®éªŒè¯ | æµå¼éªŒè¯ï¼Œè§„åˆ™æ¸…æ™° |
| **Mapster** | 7.4.0 | å¯¹è±¡æ˜ å°„ | é«˜æ€§èƒ½DTOæ˜ å°„ |
| **Quartz.NET** | 3.13.1 | ä»»åŠ¡è°ƒåº¦ | åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ |
| **JWT** | 8.0.2 | è®¤è¯ | Tokenè®¤è¯æœºåˆ¶ |
| **StackExchange.Redis** | 2.8.16 | ç¼“å­˜ | Rediså®¢æˆ·ç«¯ |
| **Yitter.IdGenerator** | 1.0.14 | IDç”Ÿæˆ | é›ªèŠ±ç®—æ³• |
| **Swashbuckle** | - | APIæ–‡æ¡£ | Swaggerè‡ªåŠ¨ç”Ÿæˆ |

### æ•°æ®åº“æ”¯æŒ

âœ… **MySQL** (é»˜è®¤ï¼Œå·²é…ç½®)  
âœ… **SQL Server** (SqlSugaræ”¯æŒ)  
âœ… **PostgreSQL** (SqlSugaræ”¯æŒ)  
âœ… **SQLite** (SqlSugaræ”¯æŒ)  
âœ… **Oracle** (SqlSugaræ”¯æŒ)

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯ä¸æˆæƒ

#### JWTè®¤è¯æœºåˆ¶
- **AccessToken**: æœ‰æ•ˆæœŸ2å°æ—¶ï¼Œç”¨äºAPIè°ƒç”¨
- **RefreshToken**: æœ‰æ•ˆæœŸ30å¤©ï¼Œç”¨äºåˆ·æ–°AccessToken
- **Claimsè½½è·**: ç”¨æˆ·IDã€ç”¨æˆ·åã€çœŸå®å§“åã€æ‰‹æœºå·ã€é‚®ç®±ã€ç§Ÿæˆ·IDç­‰

#### æƒé™æ§åˆ¶
```csharp
// æ–¹æ³•çº§æƒé™æ§åˆ¶
[RequirePermission("user:view")]
public async Task<PagedResult<UserDto>> GetPageAsync([FromQuery] PageInput input)
{
    // åªæœ‰æ‹¥æœ‰ user:view æƒé™çš„ç”¨æˆ·æ‰èƒ½è®¿é—®
}

// æ•°æ®æƒé™è¿‡æ»¤
[DataPermission(nameof(User))]
public async Task<List<UserDto>> GetListAsync()
{
    // æ ¹æ®ç”¨æˆ·çš„æ•°æ®æƒé™èŒƒå›´è‡ªåŠ¨è¿‡æ»¤æ•°æ®
}
```

#### æ¥å£é™æµ
```csharp
[RateLimit(MaxRequests = 10, TimeWindowInSeconds = 60)]
public async Task<IActionResult> LoginAsync([FromBody] LoginInput input)
{
    // é™åˆ¶æ¯åˆ†é’Ÿæœ€å¤š10æ¬¡è¯·æ±‚
}
```

---

### 2. å¤šç§Ÿæˆ·ç³»ç»Ÿ

#### ç§Ÿæˆ·éš”ç¦»
- **æ•°æ®åº“çº§éš”ç¦»**: æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
- **Schemaçº§éš”ç¦»**: å…±äº«æ•°æ®åº“ï¼Œä¸åŒSchemaï¼ˆå¯é€‰ï¼‰
- **å­—æ®µçº§éš”ç¦»**: å…±äº«è¡¨ï¼Œé€šè¿‡TenantIdå­—æ®µéš”ç¦»ï¼ˆé»˜è®¤ï¼‰

#### ç§Ÿæˆ·ä¸Šä¸‹æ–‡
```csharp
public class TenantContext
{
    // ä»JWT Claimsä¸­è‡ªåŠ¨æå–å½“å‰ç§Ÿæˆ·ID
    public long? GetCurrentTenantId()
    {
        var tenantIdClaim = _httpContextAccessor.HttpContext?.User
            .FindFirst(ClaimConst.TENANT_ID)?.Value;
        return string.IsNullOrEmpty(tenantIdClaim) ? null : long.Parse(tenantIdClaim);
    }
}
```

#### è‡ªåŠ¨ç§Ÿæˆ·è¿‡æ»¤
```csharp
// SqlSugarå…¨å±€è¿‡æ»¤å™¨
db.QueryFilter.Add(new TableFilterItem<EntityTenantBase>(u => 
    u.TenantId == tenantContext.GetCurrentTenantId()));
```

---

### 3. RBACæƒé™ç®¡ç†

#### æƒé™æ¨¡å‹
```
ç”¨æˆ·(User) â”€â”€â”¬â”€â”€ ç”¨æˆ·è§’è‰²(UserRole) â”€â”€> è§’è‰²(Role)
            â”‚                            â”‚
            â””â”€â”€ éƒ¨é—¨(Department)          â”œâ”€â”€ è§’è‰²æƒé™(RolePermission)
                                         â”‚
                                         â””â”€â”€> æƒé™(Permission)
```

#### æƒé™ç¼–ç è§„èŒƒ
- **æ¨¡å—:æ“ä½œ** æ ¼å¼ï¼Œå¦‚ `user:view`, `user:add`, `user:edit`, `user:delete`
- **é€šé…ç¬¦æ”¯æŒ**: `user:*` è¡¨ç¤ºç”¨æˆ·æ¨¡å—æ‰€æœ‰æƒé™

#### æ•°æ®æƒé™çº§åˆ«
```csharp
public enum DataScopeEnum
{
    All = 1,            // å…¨éƒ¨æ•°æ®
    Self = 2,           // ä»…æœ¬äººæ•°æ®
    SelfAndChildren = 3 // æœ¬äººåŠä¸‹å±æ•°æ®
}
```

---

### 4. æ•°æ®å®¡è®¡

#### å®¡è®¡å­—æ®µï¼ˆEntityBaseï¼‰
```csharp
public abstract class EntityBase
{
    public long Id { get; set; }              // é›ªèŠ±ID
    public DateTime CreateTime { get; set; }   // åˆ›å»ºæ—¶é—´
    public DateTime? UpdateTime { get; set; }  // æ›´æ–°æ—¶é—´
    public long? CreateUserId { get; set; }    // åˆ›å»ºäººID
    public long? UpdateUserId { get; set; }    // æ›´æ–°äººID
    public bool IsDeleted { get; set; }        // è½¯åˆ é™¤æ ‡è®°
    public DateTime? DeleteTime { get; set; }  // åˆ é™¤æ—¶é—´
}
```

#### è‡ªåŠ¨å¡«å……å®¡è®¡å­—æ®µ
```csharp
// SqlSugar AOPæ‹¦æˆª
db.Aop.OnLogExecuting = (sql, pars) =>
{
    // è‡ªåŠ¨æ³¨å…¥CreateTimeã€CreateUserIdç­‰
};
```

---

### 5. ç¼“å­˜æœåŠ¡

#### ç»Ÿä¸€ç¼“å­˜æ¥å£
```csharp
public interface ICacheService
{
    Task<T?> GetAsync<T>(string key);
    Task SetAsync<T>(string key, T value, TimeSpan? expiry = null);
    Task RemoveAsync(string key);
    Task<bool> ExistsAsync(string key);
}
```

#### åŒå®ç°åˆ‡æ¢
- **MemoryCacheService**: å†…å­˜ç¼“å­˜ï¼ˆå•æœºï¼‰
- **RedisCacheService**: Redisç¼“å­˜ï¼ˆåˆ†å¸ƒå¼ï¼‰

#### ä½¿ç”¨ç¤ºä¾‹
```csharp
// é…ç½®æ–‡ä»¶ä¸­åˆ‡æ¢
services.AddSingleton<ICacheService, MemoryCacheService>();  // å†…å­˜
// services.AddSingleton<ICacheService, RedisCacheService>(); // Redis

// ä¸šåŠ¡ä»£ç 
var user = await _cacheService.GetAsync<User>($"{CacheConst.USER_KEY}{userId}");
if (user == null)
{
    user = await _repository.GetByIdAsync(userId);
    await _cacheService.SetAsync($"{CacheConst.USER_KEY}{userId}", user, TimeSpan.FromMinutes(30));
}
```

---

### 6. å®šæ—¶ä»»åŠ¡

#### Quartz.NETé›†æˆ
```csharp
builder.Services.AddQuartz(q =>
{
    // æ•°æ®æ¸…ç†ä»»åŠ¡ - æ¯å¤©å‡Œæ™¨2ç‚¹
    var jobKey = new JobKey("DataCleanupJob");
    q.AddJob<DataCleanupJob>(opts => opts.WithIdentity(jobKey));
    q.AddTrigger(opts => opts
        .ForJob(jobKey)
        .WithCronSchedule("0 0 2 * * ?"));
});
```

#### å†…ç½®ä»»åŠ¡
- **DataCleanupJob**: æ¸…ç†è¿‡æœŸæ•°æ®ï¼ˆè½¯åˆ é™¤æ•°æ®ç‰©ç†åˆ é™¤ã€è¿‡æœŸæ—¥å¿—æ¸…ç†ï¼‰
- **DataStatisticsJob**: æ•°æ®ç»Ÿè®¡ï¼ˆç”¨æˆ·æ´»è·ƒåº¦ã€ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡ï¼‰

#### ä»»åŠ¡ç®¡ç†API
```
POST   /api/job/trigger/{jobName}    // æ‰‹åŠ¨è§¦å‘ä»»åŠ¡
GET    /api/job/list                  // è·å–ä»»åŠ¡åˆ—è¡¨
POST   /api/job/pause/{jobName}       // æš‚åœä»»åŠ¡
POST   /api/job/resume/{jobName}      // æ¢å¤ä»»åŠ¡
```

---

### 7. æ–‡ä»¶ä¸Šä¼ 

#### åŠŸèƒ½ç‰¹æ€§
- âœ… æ–‡ä»¶å¤§å°éªŒè¯ï¼ˆé»˜è®¤10MBï¼‰
- âœ… æ–‡ä»¶ç±»å‹ç™½åå•ï¼ˆå›¾ç‰‡ã€æ–‡æ¡£ã€å‹ç¼©åŒ…ç­‰ï¼‰
- âœ… æŒ‰æ—¥æœŸåˆ†ç›®å½•å­˜å‚¨ `wwwroot/uploads/2025/12/25/`
- âœ… é›ªèŠ±IDé‡å‘½åï¼ˆé˜²æ­¢æ–‡ä»¶åå†²çªï¼‰
- âœ… è¿”å›è®¿é—®URLè·¯å¾„

#### ä½¿ç”¨ç¤ºä¾‹
```csharp
[HttpPost("upload")]
public async Task<IActionResult> UploadAsync(IFormFile file)
{
    var result = await _fileService.UploadFileAsync(file);
    return Ok(new { path = result });
}
```

---

### 8. ç»Ÿä¸€å¼‚å¸¸å¤„ç†

#### å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨
```csharp
public class GlobalExceptionFilter : IExceptionFilter
{
    public void OnException(ExceptionContext context)
    {
        if (context.Exception is BusinessException businessEx)
        {
            // ä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›å‹å¥½æç¤º
            context.Result = new JsonResult(new
            {
                success = false,
                message = businessEx.Message,
                code = businessEx.ErrorCode
            });
        }
        else
        {
            // ç³»ç»Ÿå¼‚å¸¸ï¼Œè®°å½•æ—¥å¿—å¹¶è¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯
            _logger.LogError(context.Exception, "ç³»ç»Ÿå¼‚å¸¸");
            context.Result = new JsonResult(new
            {
                success = false,
                message = "ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜",
                code = 500
            });
        }
    }
}
```

#### è‡ªå®šä¹‰å¼‚å¸¸
```csharp
// ä¸šåŠ¡å¼‚å¸¸
throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");

// éªŒè¯å¼‚å¸¸
throw new ValidationException("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®");
```

---

### 9. æ•°æ®éªŒè¯

#### FluentValidationéªŒè¯å™¨
```csharp
public class UserInputValidator : AbstractValidator<UserInput>
{
    public UserInputValidator()
    {
        RuleFor(x => x.UserName)
            .NotEmpty().WithMessage("ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
            .Length(2, 20).WithMessage("ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨2-20ä¸ªå­—ç¬¦ä¹‹é—´");

        RuleFor(x => x.Password)
            .NotEmpty().WithMessage("å¯†ç ä¸èƒ½ä¸ºç©º")
            .MinimumLength(6).WithMessage("å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½");

        RuleFor(x => x.Phone)
            .Matches(@"^1[3-9]\d{9}$").When(x => !string.IsNullOrEmpty(x.Phone))
            .WithMessage("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®");
    }
}
```

#### è‡ªåŠ¨éªŒè¯
```csharp
[HttpPost]
public async Task<IActionResult> CreateAsync([FromBody] UserInput input)
{
    // FluentValidationè‡ªåŠ¨éªŒè¯inputï¼ŒéªŒè¯å¤±è´¥è‡ªåŠ¨è¿”å›400
    var result = await _userService.CreateAsync(input);
    return Ok(result);
}
```

---

### 10. è¯·æ±‚æ—¥å¿—

#### ä¸­é—´ä»¶è‡ªåŠ¨è®°å½•
```csharp
public class RequestLoggingMiddleware
{
    public async Task InvokeAsync(HttpContext context)
    {
        // è®°å½•è¯·æ±‚ä¿¡æ¯
        var requestLog = new
        {
            Path = context.Request.Path,
            Method = context.Request.Method,
            QueryString = context.Request.QueryString.Value,
            UserAgent = context.Request.Headers["User-Agent"].ToString(),
            IP = context.Connection.RemoteIpAddress?.ToString()
        };
        
        _logger.LogInformation("APIè¯·æ±‚: {@RequestLog}", requestLog);
        
        await _next(context);
        
        // è®°å½•å“åº”çŠ¶æ€
        _logger.LogInformation("å“åº”çŠ¶æ€ç : {StatusCode}", context.Response.StatusCode);
    }
}
```

---

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. ç”¨æˆ·è¡¨ (sys_user)
```sql
CREATE TABLE `sys_user` (
  `Id` bigint NOT NULL COMMENT 'ä¸»é”®ID',
  `UserName` varchar(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `Password` varchar(100) NOT NULL COMMENT 'å¯†ç (MD5)',
  `RealName` varchar(50) NULL COMMENT 'çœŸå®å§“å',
  `Phone` varchar(20) NULL COMMENT 'æ‰‹æœºå·',
  `Email` varchar(100) NULL COMMENT 'é‚®ç®±',
  `Avatar` varchar(255) NULL COMMENT 'å¤´åƒ',
  `Status` int NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€(1:å¯ç”¨ 0:ç¦ç”¨)',
  `Gender` int NULL COMMENT 'æ€§åˆ«(1:ç”· 2:å¥³)',
  `Birthday` datetime NULL COMMENT 'ç”Ÿæ—¥',
  `DepartmentId` bigint NULL COMMENT 'éƒ¨é—¨ID',
  `TenantId` bigint NULL COMMENT 'ç§Ÿæˆ·ID',
  `CreateTime` datetime NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
  `UpdateTime` datetime NULL COMMENT 'æ›´æ–°æ—¶é—´',
  `CreateUserId` bigint NULL COMMENT 'åˆ›å»ºäººID',
  `UpdateUserId` bigint NULL COMMENT 'æ›´æ–°äººID',
  `IsDeleted` tinyint(1) NOT NULL DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤',
  `DeleteTime` datetime NULL COMMENT 'åˆ é™¤æ—¶é—´',
  PRIMARY KEY (`Id`),
  INDEX `idx_username` (`UserName`),
  INDEX `idx_phone` (`Phone`),
  INDEX `idx_tenantid` (`TenantId`)
) COMMENT='ç”¨æˆ·è¡¨';
```

#### 2. è§’è‰²è¡¨ (sys_role)
```sql
CREATE TABLE `sys_role` (
  `Id` bigint NOT NULL COMMENT 'ä¸»é”®ID',
  `RoleName` varchar(50) NOT NULL COMMENT 'è§’è‰²åç§°',
  `RoleCode` varchar(50) NOT NULL COMMENT 'è§’è‰²ç¼–ç ',
  `Description` varchar(200) NULL COMMENT 'æè¿°',
  `DataScope` int NOT NULL DEFAULT 1 COMMENT 'æ•°æ®æƒé™(1:å…¨éƒ¨ 2:æœ¬äºº 3:æœ¬äººåŠä¸‹å±)',
  `TenantId` bigint NULL COMMENT 'ç§Ÿæˆ·ID',
  `CreateTime` datetime NOT NULL,
  `UpdateTime` datetime NULL,
  `CreateUserId` bigint NULL,
  `UpdateUserId` bigint NULL,
  `IsDeleted` tinyint(1) NOT NULL DEFAULT 0,
  `DeleteTime` datetime NULL,
  PRIMARY KEY (`Id`),
  UNIQUE INDEX `uk_rolecode` (`RoleCode`, `TenantId`)
) COMMENT='è§’è‰²è¡¨';
```

#### 3. æƒé™è¡¨ (sys_permission)
```sql
CREATE TABLE `sys_permission` (
  `Id` bigint NOT NULL COMMENT 'ä¸»é”®ID',
  `PermissionName` varchar(50) NOT NULL COMMENT 'æƒé™åç§°',
  `PermissionCode` varchar(100) NOT NULL COMMENT 'æƒé™ç¼–ç (å¦‚user:view)',
  `ParentId` bigint NULL COMMENT 'çˆ¶æƒé™ID',
  `Type` int NOT NULL COMMENT 'ç±»å‹(1:èœå• 2:æŒ‰é’®)',
  `Path` varchar(200) NULL COMMENT 'è·¯ç”±è·¯å¾„',
  `Icon` varchar(100) NULL COMMENT 'å›¾æ ‡',
  `Sort` int NOT NULL DEFAULT 0 COMMENT 'æ’åº',
  `CreateTime` datetime NOT NULL,
  `UpdateTime` datetime NULL,
  `CreateUserId` bigint NULL,
  `UpdateUserId` bigint NULL,
  `IsDeleted` tinyint(1) NOT NULL DEFAULT 0,
  `DeleteTime` datetime NULL,
  PRIMARY KEY (`Id`),
  UNIQUE INDEX `uk_permissioncode` (`PermissionCode`)
) COMMENT='æƒé™è¡¨';
```

#### 4. ç§Ÿæˆ·è¡¨ (sys_tenant)
```sql
CREATE TABLE `sys_tenant` (
  `Id` bigint NOT NULL COMMENT 'ä¸»é”®ID',
  `TenantName` varchar(100) NOT NULL COMMENT 'ç§Ÿæˆ·åç§°',
  `TenantCode` varchar(50) NOT NULL COMMENT 'ç§Ÿæˆ·ç¼–ç ',
  `ContactName` varchar(50) NULL COMMENT 'è”ç³»äºº',
  `ContactPhone` varchar(20) NULL COMMENT 'è”ç³»ç”µè¯',
  `ExpireTime` datetime NULL COMMENT 'åˆ°æœŸæ—¶é—´',
  `Status` int NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€(1:å¯ç”¨ 0:ç¦ç”¨)',
  `CreateTime` datetime NOT NULL,
  `UpdateTime` datetime NULL,
  `CreateUserId` bigint NULL,
  `UpdateUserId` bigint NULL,
  `IsDeleted` tinyint(1) NOT NULL DEFAULT 0,
  `DeleteTime` datetime NULL,
  PRIMARY KEY (`Id`),
  UNIQUE INDEX `uk_tenantcode` (`TenantCode`)
) COMMENT='ç§Ÿæˆ·è¡¨';
```

#### 5. å…³è”è¡¨
- **sys_user_role**: ç”¨æˆ·-è§’è‰²å…³è”è¡¨
- **sys_role_permission**: è§’è‰²-æƒé™å…³è”è¡¨
- **sys_department**: éƒ¨é—¨è¡¨

---

## APIæ¥å£è§„èŒƒ

### RESTfulé£æ ¼

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| GET | /api/user/page | åˆ†é¡µæŸ¥è¯¢ | ?pageIndex=1&pageSize=10 |
| GET | /api/user/{id} | è·å–å•ä¸ª | /api/user/123456789 |
| POST | /api/user | æ–°å¢ | Body: {...} |
| PUT | /api/user/{id} | æ›´æ–° | /api/user/123456789 |
| DELETE | /api/user/{id} | åˆ é™¤ | /api/user/123456789 |
| DELETE | /api/user/batch | æ‰¹é‡åˆ é™¤ | Body: [id1, id2] |

### ç»Ÿä¸€è¿”å›æ ¼å¼

#### æˆåŠŸå“åº”
```json
{
  "success": true,
  "data": {
    "id": 123456789,
    "userName": "admin"
  },
  "message": "æ“ä½œæˆåŠŸ"
}
```

#### åˆ†é¡µå“åº”
```json
{
  "success": true,
  "data": {
    "items": [{...}, {...}],
    "total": 100,
    "pageIndex": 1,
    "pageSize": 10
  }
}
```

#### å¤±è´¥å“åº”
```json
{
  "success": false,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
  "code": 1001
}
```

### å¸¸ç”¨é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 401 | æœªæˆæƒï¼Œéœ€è¦ç™»å½• |
| 403 | æ— æƒé™è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 1001 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ |
| 1002 | ç”¨æˆ·å·²å­˜åœ¨ |
| 1003 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 2001 | éªŒè¯å¤±è´¥ |
| 5000 | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ |

---

## å®‰å…¨ä¸æƒé™

### å¯†ç å®‰å…¨
- âœ… **MD5åŠ å¯†**: å¯†ç ä¸ä»¥æ˜æ–‡å­˜å‚¨
- âœ… **åŠ ç›å¤„ç†**: å¯é€‰é…ç½®SALTå€¼å¢å¼ºå®‰å…¨æ€§
- âœ… **å¯†ç å¼ºåº¦**: å»ºè®®æœ€å°‘6ä½ï¼ŒåŒ…å«æ•°å­—å’Œå­—æ¯

### Tokenå®‰å…¨
- âœ… **HTTPSä¼ è¾“**: ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶HTTPS
- âœ… **Tokenè¿‡æœŸ**: AccessToken 2å°æ—¶è‡ªåŠ¨è¿‡æœŸ
- âœ… **åˆ·æ–°æœºåˆ¶**: ä½¿ç”¨RefreshTokenæ— æ„Ÿåˆ·æ–°
- âœ… **é»‘åå•æœºåˆ¶**: å¯å®ç°Tokenä¸»åŠ¨å¤±æ•ˆ

### æ¥å£å®‰å…¨
- âœ… **CORSè·¨åŸŸ**: é…ç½®å…è®¸çš„Originç™½åå•
- âœ… **æ¥å£é™æµ**: é˜²æ­¢æš´åŠ›ç ´è§£å’ŒDDOSæ”»å‡»
- âœ… **å‚æ•°éªŒè¯**: FluentValidationä¸¥æ ¼éªŒè¯è¾“å…¥
- âœ… **SQLæ³¨å…¥é˜²æŠ¤**: SqlSugarå‚æ•°åŒ–æŸ¥è¯¢

### æ•°æ®å®‰å…¨
- âœ… **ç§Ÿæˆ·éš”ç¦»**: å¤šç§Ÿæˆ·æ•°æ®å®Œå…¨éš”ç¦»
- âœ… **æ•°æ®æƒé™**: ç”¨æˆ·åªèƒ½è®¿é—®æˆæƒèŒƒå›´å†…çš„æ•°æ®
- âœ… **è½¯åˆ é™¤**: é‡è¦æ•°æ®åˆ é™¤å¯æ¢å¤
- âœ… **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰æ•°æ®å˜æ›´æ“ä½œ

---

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. ç¯å¢ƒè¦æ±‚
- .NET 8 SDK
- MySQL 5.7+ / SQL Server 2016+ / PostgreSQL 9.6+
- Visual Studio 2022 / Rider / VS Code
- Redisï¼ˆå¯é€‰ï¼Œä½¿ç”¨Redisç¼“å­˜æ—¶éœ€è¦ï¼‰

#### 2. é…ç½®æ•°æ®åº“
ç¼–è¾‘ `appsettings.json`:
```json
{
  "DbConnectionOptions": {
    "ConnectionConfigs": [
      {
        "ConfigId": "Main",
        "DbType": "MySql",
        "ConnectionString": "server=localhost;Database=backendstd;Uid=root;Pwd=123456;",
        "IsAutoCloseConnection": true,
        "EnableInitDb": true  // é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å»ºè¡¨
      }
    ]
  }
}
```

#### 3. é…ç½®JWTå¯†é’¥
```json
{
  "JWTSettings": {
    "IssuerSigningKey": "your-256-bit-secret-key-change-this-in-production",
    "ValidIssuer": "backendStd",
    "ValidAudience": "backendStd.Client",
    "ExpiredTime": 120  // 2å°æ—¶
  }
}
```

#### 4. è¿è¡Œé¡¹ç›®
```bash
cd backendStd.Web.Entry
dotnet run
```

#### 5. è®¿é—®Swagger
æµè§ˆå™¨æ‰“å¼€: `http://localhost:5000/swagger`

---

### å¼€å‘æ–°åŠŸèƒ½

#### Step 1: åˆ›å»ºå®ä½“ (Core/Entity)
```csharp
[SugarTable("sys_article")]
public class Article : EntityTenantBase
{
    [SugarColumn(ColumnDescription = "æ ‡é¢˜", Length = 200)]
    public string Title { get; set; }
    
    [SugarColumn(ColumnDescription = "å†…å®¹", ColumnDataType = "text")]
    public string Content { get; set; }
    
    [SugarColumn(ColumnDescription = "ä½œè€…ID")]
    public long AuthorId { get; set; }
}
```

#### Step 2: åˆ›å»ºDTOs (Application/Dtos)
```csharp
public class ArticleDto
{
    public long Id { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
    public DateTime CreateTime { get; set; }
}

public class ArticleInput
{
    public string Title { get; set; }
    public string Content { get; set; }
}
```

#### Step 3: åˆ›å»ºéªŒè¯å™¨ (Application/Validators)
```csharp
public class ArticleInputValidator : AbstractValidator<ArticleInput>
{
    public ArticleInputValidator()
    {
        RuleFor(x => x.Title)
            .NotEmpty().WithMessage("æ ‡é¢˜ä¸èƒ½ä¸ºç©º")
            .MaximumLength(200).WithMessage("æ ‡é¢˜ä¸èƒ½è¶…è¿‡200ä¸ªå­—ç¬¦");
    }
}
```

#### Step 4: åˆ›å»ºæœåŠ¡ (Application/Services)
```csharp
public class ArticleService
{
    private readonly IRepository<Article> _repository;
    
    public async Task<PagedResult<ArticleDto>> GetPageAsync(PageInput input)
    {
        var query = _repository.AsQueryable()
            .Where(x => !x.IsDeleted);
            
        var total = await query.CountAsync();
        var items = await query
            .Skip((input.PageIndex - 1) * input.PageSize)
            .Take(input.PageSize)
            .ToListAsync();
            
        return new PagedResult<ArticleDto>
        {
            Items = items.Adapt<List<ArticleDto>>(),
            Total = total,
            PageIndex = input.PageIndex,
            PageSize = input.PageSize
        };
    }
}
```

#### Step 5: åˆ›å»ºæ§åˆ¶å™¨ (Application/Controllers)
```csharp
[ApiController]
[Route("api/[controller]")]
[Authorize]  // éœ€è¦ç™»å½•
public class ArticleController : ControllerBase
{
    private readonly ArticleService _articleService;
    
    [HttpGet("page")]
    [RequirePermission("article:view")]  // éœ€è¦æƒé™
    public async Task<PagedResult<ArticleDto>> GetPageAsync([FromQuery] PageInput input)
    {
        return await _articleService.GetPageAsync(input);
    }
}
```

#### Step 6: æ³¨å†ŒæœåŠ¡ (Program.cs)
```csharp
builder.Services.AddScoped<ArticleService>();
```

#### Step 7: è¿è¡Œé¡¹ç›®ï¼Œè‡ªåŠ¨å»ºè¡¨
é¦–æ¬¡è¿è¡Œæ—¶SqlSugarä¼šè‡ªåŠ¨åˆ›å»º `sys_article` è¡¨ã€‚

---

### éƒ¨ç½²æŒ‡å—

#### 1. å‘å¸ƒé¡¹ç›®
```bash
dotnet publish -c Release -o ./publish
```

#### 2. é…ç½®ç”Ÿäº§ç¯å¢ƒ
- ä¿®æ”¹ `appsettings.Production.json`
- ä½¿ç”¨å¼ºå¯†ç å’Œå¤æ‚JWTå¯†é’¥
- å¼€å¯HTTPS
- é…ç½®Redisç¼“å­˜
- å…³é—­è¯¦ç»†é”™è¯¯ä¿¡æ¯

#### 3. éƒ¨ç½²æ–¹å¼
- **IIS**: å®‰è£…ASP.NET Coreæ‰˜ç®¡æ†ç»‘åŒ…
- **Linux + Nginx**: ä½¿ç”¨systemdå®ˆæŠ¤è¿›ç¨‹ + Nginxåå‘ä»£ç†
- **Docker**: ä½¿ç”¨å®˜æ–¹.NETé•œåƒ
- **äº‘æœåŠ¡**: Azure App Service / AWS Elastic Beanstalk / é˜¿é‡Œäº‘ç­‰

#### 4. æ€§èƒ½ä¼˜åŒ–
- âœ… å¯ç”¨Redisåˆ†å¸ƒå¼ç¼“å­˜
- âœ… é…ç½®è¿æ¥æ± 
- âœ… å¯ç”¨å“åº”å‹ç¼©
- âœ… ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
- âœ… æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

---

## æœ€ä½³å®è·µ

### 1. åˆ†å±‚åŸåˆ™
- âŒ **ä¸è¦**: åœ¨Controllerä¸­ç›´æ¥å†™æ•°æ®åº“æŸ¥è¯¢
- âœ… **åº”è¯¥**: Controller â†’ Service â†’ Repository
- âŒ **ä¸è¦**: è·¨å±‚ä¾èµ–ï¼Œå¦‚Applicationç›´æ¥ä¾èµ–SqlSugar
- âœ… **åº”è¯¥**: é€šè¿‡IRepositoryæ¥å£è§£è€¦

### 2. å¼‚å¸¸å¤„ç†
- âŒ **ä¸è¦**: åƒæ‰å¼‚å¸¸ `catch { }`
- âœ… **åº”è¯¥**: è®°å½•æ—¥å¿—å¹¶æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸
```csharp
try
{
    // ä¸šåŠ¡é€»è¾‘
}
catch (Exception ex)
{
    _logger.LogError(ex, "ä¸šåŠ¡å¤„ç†å¤±è´¥");
    throw new BusinessException("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
}
```

### 3. æ•°æ®éªŒè¯
- âŒ **ä¸è¦**: åœ¨Serviceä¸­æ‰‹åŠ¨éªŒè¯æ¯ä¸ªå­—æ®µ
- âœ… **åº”è¯¥**: ä½¿ç”¨FluentValidationéªŒè¯å™¨
- âœ… **åº”è¯¥**: åœ¨DTOçº§åˆ«éªŒè¯ï¼Œè€Œä¸æ˜¯Entityçº§åˆ«

### 4. ç¼“å­˜ä½¿ç”¨
- âœ… **åº”è¯¥**: ç¼“å­˜ä¸å¸¸å˜åŒ–çš„æ•°æ®ï¼ˆå­—å…¸ã€é…ç½®ã€æƒé™ç­‰ï¼‰
- âŒ **ä¸è¦**: ç¼“å­˜é¢‘ç¹å˜åŒ–çš„æ•°æ®
- âœ… **åº”è¯¥**: è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
- âœ… **åº”è¯¥**: æ›´æ–°æ•°æ®æ—¶åŒæ­¥åˆ é™¤ç¼“å­˜

### 5. æ€§èƒ½ä¼˜åŒ–
- âœ… **åº”è¯¥**: ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…å…¨è¡¨æ‰«æ
- âœ… **åº”è¯¥**: ä½¿ç”¨å¼‚æ­¥æ–¹æ³• `async/await`
- âœ… **åº”è¯¥**: é¿å…N+1æŸ¥è¯¢ï¼Œä½¿ç”¨Joinæˆ–Includes
- âœ… **åº”è¯¥**: ç»™å¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç´¢å¼•

### 6. å®‰å…¨è§„èŒƒ
- âœ… **åº”è¯¥**: æ‰€æœ‰å¯†ç åŠ å¯†å­˜å‚¨
- âœ… **åº”è¯¥**: æ•æ„Ÿæ¥å£æ·»åŠ æƒé™éªŒè¯
- âœ… **åº”è¯¥**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
- âœ… **åº”è¯¥**: å®šæœŸæ›´æ–°ä¾èµ–åŒ…ï¼Œä¿®å¤å®‰å…¨æ¼æ´

### 7. æ—¥å¿—è§„èŒƒ
```csharp
// âŒ ä¸å¥½çš„æ—¥å¿—
_logger.LogInformation("ç”¨æˆ·ç™»å½•");

// âœ… å¥½çš„æ—¥å¿—
_logger.LogInformation("ç”¨æˆ·ç™»å½•æˆåŠŸ, UserId: {UserId}, IP: {IP}", userId, ipAddress);
```

### 8. äº‹åŠ¡å¤„ç†
```csharp
// è·¨è¡¨æ“ä½œä½¿ç”¨äº‹åŠ¡
_repository.BeginTran();
try
{
    await _repository.InsertAsync(user);
    await _repository.InsertAsync(userRole);
    _repository.CommitTran();
}
catch
{
    _repository.RollbackTran();
    throw;
}
```

---

## é™„å½•

### å¸¸ç”¨å‘½ä»¤

```bash
# æ„å»ºé¡¹ç›®
dotnet build

# è¿è¡Œé¡¹ç›®
dotnet run --project backendStd.Web.Entry

# å‘å¸ƒé¡¹ç›®
dotnet publish -c Release

# æ¸…ç†è¾“å‡º
dotnet clean

# æ·»åŠ åŒ…
dotnet add package PackageName

# æ•°æ®åº“è¿ç§»ï¼ˆæ‰‹åŠ¨æ‰§è¡ŒSQLæˆ–ä½¿ç”¨EnableInitDbè‡ªåŠ¨å»ºè¡¨ï¼‰
```

### ç›®å½•ç»“æ„è¯´æ˜

```
backendStd.Web.Entry/
â”œâ”€â”€ appsettings.json          # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ appsettings.Development.json  # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ appsettings.Production.json   # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ Program.cs                # å¯åŠ¨å…¥å£
â”œâ”€â”€ wwwroot/                  # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ uploads/              # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â””â”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶ç›®å½•

backendStd.Application/
â”œâ”€â”€ Controllers/              # APIæ§åˆ¶å™¨
â”œâ”€â”€ Dtos/                     # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ Services/                 # ä¸šåŠ¡æœåŠ¡
â””â”€â”€ Validators/               # æ•°æ®éªŒè¯å™¨

backendStd.Core/
â”œâ”€â”€ Entity/                   # å®ä½“æ¨¡å‹
â”‚   â””â”€â”€ Base/                 # å®ä½“åŸºç±»
â”œâ”€â”€ Repository/               # ä»“å‚¨æ¥å£/å®ç°
â”œâ”€â”€ Auth/                     # è®¤è¯æˆæƒ
â”‚   â”œâ”€â”€ JwtHandler.cs         # JWTå¤„ç†å™¨
â”‚   â”œâ”€â”€ RequirePermissionAttribute.cs  # æƒé™ç‰¹æ€§
â”‚   â””â”€â”€ DataPermissionAttribute.cs     # æ•°æ®æƒé™ç‰¹æ€§
â”œâ”€â”€ Cache/                    # ç¼“å­˜æœåŠ¡
â”œâ”€â”€ Jobs/                     # å®šæ—¶ä»»åŠ¡
â”œâ”€â”€ Filters/                  # è¿‡æ»¤å™¨
â”‚   â”œâ”€â”€ GlobalExceptionFilter.cs   # å…¨å±€å¼‚å¸¸è¿‡æ»¤
â”‚   â”œâ”€â”€ DataPermissionFilter.cs    # æ•°æ®æƒé™è¿‡æ»¤
â”‚   â””â”€â”€ TenantFilter.cs            # ç§Ÿæˆ·è¿‡æ»¤
â”œâ”€â”€ Middleware/               # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ RequestLoggingMiddleware.cs  # è¯·æ±‚æ—¥å¿—
â”‚   â””â”€â”€ RateLimitingMiddleware.cs    # æ¥å£é™æµ
â”œâ”€â”€ Options/                  # é…ç½®é€‰é¡¹
â”œâ”€â”€ Enum/                     # æšä¸¾
â”œâ”€â”€ Const/                    # å¸¸é‡
â””â”€â”€ Util/                     # å·¥å…·ç±»

backendStd.Common/
â”œâ”€â”€ Exceptions/               # è‡ªå®šä¹‰å¼‚å¸¸
â””â”€â”€ Models/                   # é€šç”¨æ¨¡å‹
```

### è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»:
- é¡¹ç›®åœ°å€: [å¾…è¡¥å……]
- é—®é¢˜åé¦ˆ: [å¾…è¡¥å……]
- æŠ€æœ¯æ”¯æŒ: [å¾…è¡¥å……]

---

**æœ€åæ›´æ–°æ—¶é—´**: 2025å¹´12æœˆ25æ—¥  
**ç‰ˆæœ¬**: v1.0  
**è®¸å¯è¯**: MIT License
